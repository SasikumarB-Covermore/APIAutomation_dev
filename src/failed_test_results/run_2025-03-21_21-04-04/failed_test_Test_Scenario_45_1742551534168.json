{
  "testName": "Test_Scenario_45",
  "testFileName": "02_create_insurance_policy_with_addon.spec.js",
  "scenarios": [
    {
      "scenario": "Scenario_1: Get Quote for MCMF",
      "payload": {
        "issuer": {
          "code": "MBN0002",
          "userName": "webuser",
          "externalStoreCode": ""
        },
        "trip": {
          "destinationCountryCodes": [
            "ATC"
          ],
          "startDate": "2025-03-25",
          "endDate": "2025-04-23"
        },
        "travellers": [
          {
            "dateOfBirth": "1988-03-21",
            "age": 37,
            "isPrimary": true,
            "treatAsAdult": true
          },
          {
            "dateOfBirth": "1979-03-21",
            "age": 46,
            "isPrimary": false,
            "treatAsAdult": true
          },
          {
            "dateOfBirth": "2015-03-21",
            "age": 10,
            "isPrimary": false,
            "treatAsAdult": false
          }
        ],
        "purchasePath": "Leisure_Medibank",
        "isResident": "true"
      },
      "response": {
        "sessionId": null,
        "quoteId": 7739701,
        "externalReferenceId": null,
        "currencyCode": "AUD",
        "cultureCode": "en-AU",
        "quoteSummary": {
          "purchasePath": "Leisure_Medibank",
          "quoteDate": "2025-03-21T21:05:28Z",
          "trip": {
            "tripCost": "0",
            "startDate": "2025-03-25",
            "endDate": "2025-04-23",
            "destinationAreaCode": "WA2",
            "destinationAreaName": "Worldwide (inc. Americas and Africa)",
            "destinationCountryCodes": [
              "ATC"
            ],
            "destinationAirportCodes": null,
            "departureAirportCodes": null,
            "destinationType": "International",
            "primaryCountryCode": "ATC",
            "travelClass": null
          },
          "travellers": [
            {
              "title": null,
              "firstName": null,
              "surname": null,
              "age": 37,
              "dateOfBirth": "1988-03-21",
              "gender": null,
              "isPrimary": true,
              "memberId": null,
              "externalCustomerId": null,
              "treatAsAdult": true,
              "additionalCoverAddons": null,
              "emc": null
            },
            {
              "title": null,
              "firstName": null,
              "surname": null,
              "age": 46,
              "dateOfBirth": "1979-03-21",
              "gender": null,
              "isPrimary": false,
              "memberId": null,
              "externalCustomerId": null,
              "treatAsAdult": true,
              "additionalCoverAddons": null,
              "emc": null
            },
            {
              "title": null,
              "firstName": null,
              "surname": null,
              "age": 10,
              "dateOfBirth": "2015-03-21",
              "gender": null,
              "isPrimary": false,
              "memberId": null,
              "externalCustomerId": null,
              "treatAsAdult": false,
              "additionalCoverAddons": null,
              "emc": null
            }
          ],
          "products": [
            {
              "purchasePath": "Leisure_Medibank",
              "productCode": "MBM",
              "productName": "Medical Only",
              "planCode": "MMA",
              "name": "Int-ST",
              "planName": "Medical Only",
              "destinationType": "International",
              "tripType": "Single Trip",
              "tripTypeCode": "SingleTrip",
              "enabled": true,
              "minAdults": 1,
              "maxAdults": 4,
              "minChildren": 0,
              "maxChildren": 6,
              "minDuration": 2,
              "maxDuration": 366,
              "minAge": 0,
              "maxAge": 99,
              "pdsUrl": "",
              "isEmcAvailable": true,
              "adultChargeRate": 1,
              "childChargeRate": 0,
              "excesses": null,
              "maxDurationDays": null,
              "additionalCoverAddons": [
                {
                  "price": 0,
                  "addOnDuration": null,
                  "options": [
                    {
                      "description": "$Unlimited",
                      "value": "5870"
                    }
                  ],
                  "helpText": "",
                  "name": "Cancellation Variation",
                  "applyAtLevel": "Policy",
                  "code": "CANX"
                }
              ],
              "availableCoverAddons": [
                {
                  "code": "MTCL",
                  "applyAtLevel": "Policy",
                  "name": "Motorcycle / Moped Riding",
                  "helpText": "",
                  "options": [
                    {
                      "value": "0",
                      "description": "Yes"
                    },
                    {
                      "value": "0",
                      "description": "No"
                    }
                  ],
                  "addOnDuration": {
                    "startDate": "2025-03-25",
                    "endDate": "2025-04-23"
                  },
                  "price": "31.00"
                },
                {
                  "code": "WNTS",
                  "applyAtLevel": "Policy",
                  "name": "Snow Skiing And Snowboarding",
                  "helpText": "",
                  "options": [],
                  "addOnDuration": {
                    "startDate": "2025-03-25",
                    "endDate": "2025-04-23"
                  },
                  "price": "654.00"
                },
                {
                  "code": "CANX",
                  "applyAtLevel": "Policy",
                  "name": "Cancellation Variation",
                  "helpText": "",
                  "options": [
                    {
                      "value": "5870",
                      "description": "$Unlimited"
                    }
                  ],
                  "addOnDuration": {
                    "startDate": "2025-03-25",
                    "endDate": "2025-04-23"
                  },
                  "price": "0.00"
                },
                {
                  "code": "EMCT3",
                  "applyAtLevel": "Traveller",
                  "name": "EMC (Approval Required)",
                  "helpText": "",
                  "options": [],
                  "addOnDuration": {
                    "startDate": "2025-03-25",
                    "endDate": "2025-04-23"
                  },
                  "price": "954.00"
                },
                {
                  "code": "CRS",
                  "applyAtLevel": "Policy",
                  "name": "Cruise Cover",
                  "helpText": "",
                  "options": [
                    {
                      "value": "0",
                      "description": "Yes"
                    },
                    {
                      "value": "0",
                      "description": "No"
                    }
                  ],
                  "addOnDuration": {
                    "startDate": "2025-03-25",
                    "endDate": "2025-04-23"
                  },
                  "price": "111.00"
                },
                {
                  "code": "EMCT5",
                  "applyAtLevel": "Traveller",
                  "name": "EMC Tier 5 (Approval Required)",
                  "helpText": "",
                  "options": [],
                  "addOnDuration": {
                    "startDate": "2025-03-25",
                    "endDate": "2025-04-23"
                  },
                  "price": "0.00"
                },
                {
                  "code": "EMCT6",
                  "applyAtLevel": "Traveller",
                  "name": "EMC Tier 6 (Approval Required)",
                  "helpText": "",
                  "options": [],
                  "addOnDuration": {
                    "startDate": "2025-03-25",
                    "endDate": "2025-04-23"
                  },
                  "price": "814.00"
                },
                {
                  "code": "EMCT7",
                  "applyAtLevel": "Traveller",
                  "name": "EMC Tier 7 (Approval Required)",
                  "helpText": "",
                  "options": [],
                  "addOnDuration": {
                    "startDate": "2025-03-25",
                    "endDate": "2025-04-23"
                  },
                  "price": "2156.00"
                },
                {
                  "code": "EMCT8",
                  "applyAtLevel": "Traveller",
                  "name": "EMC Tier 8 (Approval Required)",
                  "helpText": "",
                  "options": [],
                  "addOnDuration": {
                    "startDate": "2025-03-25",
                    "endDate": "2025-04-23"
                  },
                  "price": "2268.00"
                },
                {
                  "code": "EMCT9",
                  "applyAtLevel": "Traveller",
                  "name": "EMC Tier 9 (Approval Required)",
                  "helpText": "",
                  "options": [],
                  "addOnDuration": {
                    "startDate": "2025-03-25",
                    "endDate": "2025-04-23"
                  },
                  "price": "2508.00"
                },
                {
                  "code": "EMCT10",
                  "applyAtLevel": "Traveller",
                  "name": "EMC Tier 10 (Approval Required)",
                  "helpText": "",
                  "options": [],
                  "addOnDuration": {
                    "startDate": "2025-03-25",
                    "endDate": "2025-04-23"
                  },
                  "price": "3656.00"
                }
              ],
              "declarations": null,
              "appliedDiscounts": [],
              "premiumMatrix": [
                {
                  "excess": 0,
                  "maxDurationDays": null,
                  "totalGrossPremium": "768.00",
                  "totalAdjustedGrossPremium": "768.00",
                  "premiumPerDay": "25.60",
                  "isSelected": false,
                  "commission": "284.16"
                },
                {
                  "excess": 100,
                  "maxDurationDays": null,
                  "totalGrossPremium": "622.00",
                  "totalAdjustedGrossPremium": "622.00",
                  "premiumPerDay": "20.73",
                  "isSelected": false,
                  "commission": "230.14"
                },
                {
                  "excess": 250,
                  "maxDurationDays": null,
                  "totalGrossPremium": "494.00",
                  "totalAdjustedGrossPremium": "494.00",
                  "premiumPerDay": "16.47",
                  "isSelected": true,
                  "commission": "182.78"
                }
              ],
              "keySellingPoints": null,
              "benefits": null
            },
            {
              "purchasePath": "Leisure_Medibank",
              "productCode": "MBC",
              "productName": "Comprehensive",
              "planCode": "MCA",
              "name": "Int-ST",
              "planName": "Comprehensive",
              "destinationType": "International",
              "tripType": "Single Trip",
              "tripTypeCode": "SingleTrip",
              "enabled": true,
              "minAdults": 1,
              "maxAdults": 4,
              "minChildren": 0,
              "maxChildren": 6,
              "minDuration": 2,
              "maxDuration": 366,
              "minAge": 0,
              "maxAge": 99,
              "pdsUrl": "",
              "isEmcAvailable": true,
              "adultChargeRate": 1,
              "childChargeRate": 0,
              "excesses": null,
              "maxDurationDays": null,
              "additionalCoverAddons": [
                {
                  "price": 0,
                  "addOnDuration": null,
                  "options": [
                    {
                      "description": "$Unlimited",
                      "value": "5870"
                    }
                  ],
                  "helpText": "",
                  "name": "Cancellation Variation",
                  "applyAtLevel": "Policy",
                  "code": "CANX"
                }
              ],
              "availableCoverAddons": [
                {
                  "code": "LUGG",
                  "applyAtLevel": "Traveller",
                  "name": "Increase Luggage Item Limits",
                  "helpText": "",
                  "options": [
                    {
                      "value": "500",
                      "description": "$500"
                    },
                    {
                      "value": "1500",
                      "description": "$1,500"
                    },
                    {
                      "value": "2500",
                      "description": "$2,500"
                    },
                    {
                      "value": "3500",
                      "description": "$3,500"
                    },
                    {
                      "value": "4500",
                      "description": "$4,500"
                    }
                  ],
                  "addOnDuration": {
                    "startDate": "2025-03-25",
                    "endDate": "2025-04-23"
                  },
                  "price": "0"
                },
                {
                  "code": "MTCL",
                  "applyAtLevel": "Policy",
                  "name": "Motorcycle / Moped Riding",
                  "helpText": "",
                  "options": [
                    {
                      "value": "0",
                      "description": "Yes"
                    },
                    {
                      "value": "0",
                      "description": "No"
                    }
                  ],
                  "addOnDuration": {
                    "startDate": "2025-03-25",
                    "endDate": "2025-04-23"
                  },
                  "price": "45.00"
                },
                {
                  "code": "WNTS",
                  "applyAtLevel": "Policy",
                  "name": "Snow Skiing And Snowboarding",
                  "helpText": "",
                  "options": [],
                  "addOnDuration": {
                    "startDate": "2025-03-25",
                    "endDate": "2025-04-23"
                  },
                  "price": "0"
                },
                {
                  "code": "CANX",
                  "applyAtLevel": "Policy",
                  "name": "Cancellation Variation",
                  "helpText": "",
                  "options": [
                    {
                      "value": "5870",
                      "description": "$Unlimited"
                    }
                  ],
                  "addOnDuration": {
                    "startDate": "2025-03-25",
                    "endDate": "2025-04-23"
                  },
                  "price": "33.00"
                },
                {
                  "code": "EMCT3",
                  "applyAtLevel": "Traveller",
                  "name": "EMC (Approval Required)",
                  "helpText": "",
                  "options": [],
                  "addOnDuration": {
                    "startDate": "2025-03-25",
                    "endDate": "2025-04-23"
                  },
                  "price": "0"
                },
                {
                  "code": "CRS",
                  "applyAtLevel": "Policy",
                  "name": "Cruise Cover",
                  "helpText": "",
                  "options": [
                    {
                      "value": "0",
                      "description": "Yes"
                    },
                    {
                      "value": "0",
                      "description": "No"
                    }
                  ],
                  "addOnDuration": {
                    "startDate": "2025-03-25",
                    "endDate": "2025-04-23"
                  },
                  "price": "173.00"
                },
                {
                  "code": "EMCT5",
                  "applyAtLevel": "Traveller",
                  "name": "EMC Tier 5 (Approval Required)",
                  "helpText": "",
                  "options": [],
                  "addOnDuration": {
                    "startDate": "2025-03-25",
                    "endDate": "2025-04-23"
                  },
                  "price": "0"
                },
                {
                  "code": "EMCT6",
                  "applyAtLevel": "Traveller",
                  "name": "EMC Tier 6 (Approval Required)",
                  "helpText": "",
                  "options": [],
                  "addOnDuration": {
                    "startDate": "2025-03-25",
                    "endDate": "2025-04-23"
                  },
                  "price": "0"
                },
                {
                  "code": "EMCT7",
                  "applyAtLevel": "Traveller",
                  "name": "EMC Tier 7 (Approval Required)",
                  "helpText": "",
                  "options": [],
                  "addOnDuration": {
                    "startDate": "2025-03-25",
                    "endDate": "2025-04-23"
                  },
                  "price": "0"
                },
                {
                  "code": "EMCT8",
                  "applyAtLevel": "Traveller",
                  "name": "EMC Tier 8 (Approval Required)",
                  "helpText": "",
                  "options": [],
                  "addOnDuration": {
                    "startDate": "2025-03-25",
                    "endDate": "2025-04-23"
                  },
                  "price": "0"
                },
                {
                  "code": "EMCT9",
                  "applyAtLevel": "Traveller",
                  "name": "EMC Tier 9 (Approval Required)",
                  "helpText": "",
                  "options": [],
                  "addOnDuration": {
                    "startDate": "2025-03-25",
                    "endDate": "2025-04-23"
                  },
                  "price": "0"
                },
                {
                  "code": "EMCT10",
                  "applyAtLevel": "Traveller",
                  "name": "EMC Tier 10 (Approval Required)",
                  "helpText": "",
                  "options": [],
                  "addOnDuration": {
                    "startDate": "2025-03-25",
                    "endDate": "2025-04-23"
                  },
                  "price": "0"
                }
              ],
              "declarations": null,
              "appliedDiscounts": [],
              "premiumMatrix": [
                {
                  "excess": 0,
                  "maxDurationDays": null,
                  "totalGrossPremium": "1140.00",
                  "totalAdjustedGrossPremium": "1140.00",
                  "premiumPerDay": "38.00",
                  "isSelected": false,
                  "commission": "421.80"
                },
                {
                  "excess": 100,
                  "maxDurationDays": null,
                  "totalGrossPremium": "987.00",
                  "totalAdjustedGrossPremium": "987.00",
                  "premiumPerDay": "32.90",
                  "isSelected": false,
                  "commission": "365.19"
                },
                {
                  "excess": 250,
                  "maxDurationDays": null,
                  "totalGrossPremium": "801.00",
                  "totalAdjustedGrossPremium": "801.00",
                  "premiumPerDay": "26.70",
                  "isSelected": true,
                  "commission": "296.37"
                }
              ],
              "keySellingPoints": null,
              "benefits": null
            },
            {
              "purchasePath": "Leisure_Medibank",
              "productCode": "MBC",
              "productName": "Comprehensive",
              "planCode": "MCMF",
              "name": "Int-AMT-Family",
              "planName": "Comprehensive",
              "destinationType": "International",
              "tripType": "Annual Multi Trip",
              "tripTypeCode": "AnnualMultiTrip",
              "enabled": true,
              "minAdults": 2,
              "maxAdults": 2,
              "minChildren": 0,
              "maxChildren": 6,
              "minDuration": 30,
              "maxDuration": 60,
              "minAge": 0,
              "maxAge": 99,
              "pdsUrl": "",
              "isEmcAvailable": true,
              "adultChargeRate": 1,
              "childChargeRate": 0,
              "excesses": null,
              "maxDurationDays": null,
              "additionalCoverAddons": [
                {
                  "price": 0,
                  "addOnDuration": null,
                  "options": [
                    {
                      "description": "$Unlimited",
                      "value": "5870"
                    }
                  ],
                  "helpText": "",
                  "name": "Cancellation Variation",
                  "applyAtLevel": "Policy",
                  "code": "CANX"
                }
              ],
              "availableCoverAddons": [
                {
                  "code": "LUGG",
                  "applyAtLevel": "Traveller",
                  "name": "Increase Luggage Item Limits",
                  "helpText": "",
                  "options": [
                    {
                      "value": "500",
                      "description": "$500"
                    },
                    {
                      "value": "1500",
                      "description": "$1,500"
                    },
                    {
                      "value": "2500",
                      "description": "$2,500"
                    },
                    {
                      "value": "3500",
                      "description": "$3,500"
                    },
                    {
                      "value": "4500",
                      "description": "$4,500"
                    }
                  ],
                  "addOnDuration": {
                    "startDate": "2025-03-25",
                    "endDate": "2025-04-23"
                  },
                  "price": "0"
                },
                {
                  "code": "MTCL",
                  "applyAtLevel": "Policy",
                  "name": "Motorcycle / Moped Riding",
                  "helpText": "",
                  "options": [
                    {
                      "value": "0",
                      "description": "Yes"
                    },
                    {
                      "value": "0",
                      "description": "No"
                    }
                  ],
                  "addOnDuration": {
                    "startDate": "2025-03-25",
                    "endDate": "2025-04-23"
                  },
                  "price": "36.00"
                },
                {
                  "code": "WNTS",
                  "applyAtLevel": "Policy",
                  "name": "Snow Skiing And Snowboarding",
                  "helpText": "",
                  "options": [],
                  "addOnDuration": {
                    "startDate": "2025-03-25",
                    "endDate": "2025-04-23"
                  },
                  "price": "0"
                },
                {
                  "code": "CANX",
                  "applyAtLevel": "Policy",
                  "name": "Cancellation Variation",
                  "helpText": "",
                  "options": [
                    {
                      "value": "5870",
                      "description": "$Unlimited"
                    }
                  ],
                  "addOnDuration": {
                    "startDate": "2025-03-25",
                    "endDate": "2025-04-23"
                  },
                  "price": "146.00"
                },
                {
                  "code": "EMCT3",
                  "applyAtLevel": "Traveller",
                  "name": "EMC (Approval Required)",
                  "helpText": "",
                  "options": [],
                  "addOnDuration": {
                    "startDate": "2025-03-25",
                    "endDate": "2025-04-23"
                  },
                  "price": "0"
                },
                {
                  "code": "CRS",
                  "applyAtLevel": "Policy",
                  "name": "Cruise Cover",
                  "helpText": "",
                  "options": [
                    {
                      "value": "0",
                      "description": "Yes"
                    },
                    {
                      "value": "0",
                      "description": "No"
                    }
                  ],
                  "addOnDuration": {
                    "startDate": "2025-03-25",
                    "endDate": "2025-04-23"
                  },
                  "price": "127.00"
                },
                {
                  "code": "EMCT5",
                  "applyAtLevel": "Traveller",
                  "name": "EMC Tier 5 (Approval Required)",
                  "helpText": "",
                  "options": [],
                  "addOnDuration": {
                    "startDate": "2025-03-25",
                    "endDate": "2025-04-23"
                  },
                  "price": "0"
                },
                {
                  "code": "EMCT6",
                  "applyAtLevel": "Traveller",
                  "name": "EMC Tier 6 (Approval Required)",
                  "helpText": "",
                  "options": [],
                  "addOnDuration": {
                    "startDate": "2025-03-25",
                    "endDate": "2025-04-23"
                  },
                  "price": "0"
                },
                {
                  "code": "EMCT7",
                  "applyAtLevel": "Traveller",
                  "name": "EMC Tier 7 (Approval Required)",
                  "helpText": "",
                  "options": [],
                  "addOnDuration": {
                    "startDate": "2025-03-25",
                    "endDate": "2025-04-23"
                  },
                  "price": "0"
                },
                {
                  "code": "EMCT8",
                  "applyAtLevel": "Traveller",
                  "name": "EMC Tier 8 (Approval Required)",
                  "helpText": "",
                  "options": [],
                  "addOnDuration": {
                    "startDate": "2025-03-25",
                    "endDate": "2025-04-23"
                  },
                  "price": "0"
                },
                {
                  "code": "EMCT9",
                  "applyAtLevel": "Traveller",
                  "name": "EMC Tier 9 (Approval Required)",
                  "helpText": "",
                  "options": [],
                  "addOnDuration": {
                    "startDate": "2025-03-25",
                    "endDate": "2025-04-23"
                  },
                  "price": "0"
                },
                {
                  "code": "EMCT10",
                  "applyAtLevel": "Traveller",
                  "name": "EMC Tier 10 (Approval Required)",
                  "helpText": "",
                  "options": [],
                  "addOnDuration": {
                    "startDate": "2025-03-25",
                    "endDate": "2025-04-23"
                  },
                  "price": "0"
                }
              ],
              "declarations": null,
              "appliedDiscounts": [],
              "premiumMatrix": [
                {
                  "excess": 0,
                  "maxDurationDays": 30,
                  "totalGrossPremium": "1068.00",
                  "totalAdjustedGrossPremium": "1068.00",
                  "premiumPerDay": null,
                  "isSelected": false,
                  "commission": "395.16"
                },
                {
                  "excess": 0,
                  "maxDurationDays": 45,
                  "totalGrossPremium": "1840.00",
                  "totalAdjustedGrossPremium": "1840.00",
                  "premiumPerDay": null,
                  "isSelected": false,
                  "commission": "680.80"
                },
                {
                  "excess": 0,
                  "maxDurationDays": 60,
                  "totalGrossPremium": "2292.00",
                  "totalAdjustedGrossPremium": "2292.00",
                  "premiumPerDay": null,
                  "isSelected": false,
                  "commission": "848.04"
                },
                {
                  "excess": 100,
                  "maxDurationDays": 30,
                  "totalGrossPremium": "940.00",
                  "totalAdjustedGrossPremium": "940.00",
                  "premiumPerDay": null,
                  "isSelected": false,
                  "commission": "347.80"
                },
                {
                  "excess": 100,
                  "maxDurationDays": 45,
                  "totalGrossPremium": "1492.00",
                  "totalAdjustedGrossPremium": "1492.00",
                  "premiumPerDay": null,
                  "isSelected": false,
                  "commission": "552.04"
                },
                {
                  "excess": 100,
                  "maxDurationDays": 60,
                  "totalGrossPremium": "1776.00",
                  "totalAdjustedGrossPremium": "1776.00",
                  "premiumPerDay": null,
                  "isSelected": false,
                  "commission": "657.12"
                },
                {
                  "excess": 250,
                  "maxDurationDays": 30,
                  "totalGrossPremium": "708.00",
                  "totalAdjustedGrossPremium": "708.00",
                  "premiumPerDay": null,
                  "isSelected": true,
                  "commission": "261.96"
                },
                {
                  "excess": 250,
                  "maxDurationDays": 45,
                  "totalGrossPremium": "1112.00",
                  "totalAdjustedGrossPremium": "1112.00",
                  "premiumPerDay": null,
                  "isSelected": false,
                  "commission": "411.44"
                },
                {
                  "excess": 250,
                  "maxDurationDays": 60,
                  "totalGrossPremium": "1516.00",
                  "totalAdjustedGrossPremium": "1516.00",
                  "premiumPerDay": null,
                  "isSelected": false,
                  "commission": "560.92"
                }
              ],
              "keySellingPoints": null,
              "benefits": null
            }
          ]
        }
      }
    },
    {
      "scenario": "Scenario_2: Get Quote for MCMF",
      "error": "apiRequestContext.post: read ECONNRESET Call log:   - â†’ POST https://test3-api.travelinsurancepartners.com/v3/Quotes   -   user-agent: Playwright/1.47.2 (x64; windows 10.0) node/22.13   -   accept: */*   -   accept-encoding: gzip,deflate,br   -   X-API-Key: 711b3dc1331b443b81429ec7350443aa   -   X-Timestamp: 2025-03-21T10:04:04.003Z   -   X-Signature: Gc+UwK4iJLnmfhTFTplWTnoyWU8=   -   Content-Type: application/json   -   X-Correlation-Id: TestGetQuoteCorrelationId   -   content-length: 2565   -   cookie: NSC_JO2rqnt5djqkq52bg3u3ryd3y04elcM=ffffffff09c0160545525d5f4f58455e445a4a42378b"
    }
  ],
  "hasError": true
}